<!-- MainWindow.xaml -->
<Window x:Class="EisenhowerMatrixPlanner.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:EisenhowerMatrixPlanner.Views.Controls"
		xmlns:behaviors="clr-namespace:EisenhowerMatrixPlanner.Common.Behaviors" 
        xmlns:viewmodels="clr-namespace:EisenhowerMatrixPlanner.ViewModels" 
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        Title="{Binding Title}" Height="700" Width="1100"
        WindowStartupLocation="CenterScreen"
        Background="#fafafa">

	<Grid Margin="20">
		<Grid.RowDefinitions>
			<RowDefinition Height="60"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<!-- Header -->
		<StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
			<TextBlock Text="Eisenhower Matrix Planner" FontSize="28" FontWeight="SemiBold" Foreground="#1a1a1a"/>
			<Button Content="+ Add Task"
					Command="{Binding AddTaskCommand}"
					Margin="30,0,0,0"
					Padding="20,10"
					FontSize="16"
					Background="#1976d2"
					Foreground="White"
					BorderThickness="0">
				<Button.Clip>
					<RectangleGeometry RadiusX="12" RadiusY="12" Rect="0,0,140,44"/>
				</Button.Clip>
			</Button>
		</StackPanel>

		<!-- Matrix Canvas -->
		<Border Grid.Row="1" Background="White" CornerRadius="16" BorderBrush="#e0e0e0" BorderThickness="1">
			<Canvas x:Name="MatrixCanvas"
                    Background="Transparent"
                    SizeChanged="MatrixCanvas_SizeChanged"
                    ClipToBounds="True">

				<!-- پس‌زمینه ۴ رنگ ملایم برای ربع‌ها -->
				<Rectangle Width="{Binding ActualWidth, ElementName=MatrixCanvas}"
                           Height="{Binding ActualHeight, ElementName=MatrixCanvas}">
					<Rectangle.Fill>
						<LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
							<GradientStop Offset="0" Color="#ffcccc"/>
							<!-- بالا چپ: قرمز ملایم -->
							<GradientStop Offset="0.5" Color="#ccffcc"/>
							<!-- بالا راست: سبز ملایم -->
							<GradientStop Offset="0.5" Color="#ffffcc"/>
							<!-- پایین چپ: زرد ملایم -->
							<GradientStop Offset="1" Color="#e6e6e6"/>
							<!-- پایین راست: خاکستری -->
						</LinearGradientBrush>
					</Rectangle.Fill>
				</Rectangle>

				<!-- نمایش کارت‌های تسک -->
				<ItemsControl ItemsSource="{Binding Tasks}">
					<ItemsControl.ItemsPanel>
						<ItemsPanelTemplate>
							<Canvas />
						</ItemsPanelTemplate>
					</ItemsControl.ItemsPanel>
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<controls:TaskCard DataContext="{Binding}"
                                               Canvas.Left="{Binding CanvasX, Mode=TwoWay}"
                                               Canvas.Top="{Binding CanvasY, Mode=TwoWay}"
                                               behaviors:DragBehavior.IsDragEnabled="True"/>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</Canvas>
		</Border>
	</Grid>
</Window>